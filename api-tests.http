# ğŸ§ª TESTS API - Application de Facturation Next.js 15
# Fichier de tests HTTP pour VSCode REST Client
# Installation : Installer l'extension "REST Client" dans VSCode
# Usage : Cliquer sur "Send Request" au-dessus de chaque requÃªte

### Variables globales
@baseUrl = http://localhost:3000
@apiUrl = {{baseUrl}}/api/invoices

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“‹ TESTS GET - RÃ‰CUPÃ‰RATION DES FACTURES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### GET - RÃ©cupÃ©rer toutes les factures (liste vide initialement)
GET {{apiUrl}}
Accept: application/json

### GET - Test avec en-tÃªtes personnalisÃ©s
GET {{apiUrl}}
Accept: application/json
User-Agent: Test-Client/1.0
X-Test-Type: API-Testing

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# âœ… TESTS POST - CRÃ‰ATION DE FACTURES VALIDES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### POST - CrÃ©er une facture simple et valide
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Entreprise ABC",
  "email": "contact@entreprise-abc.com",
  "value": "1500.00",
  "description": "DÃ©veloppement site web e-commerce"
}

### POST - CrÃ©er une facture avec montant dÃ©cimal
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "SociÃ©tÃ© XYZ",
  "email": "admin@societe-xyz.fr",
  "value": "2750.99",
  "description": "Consulting technique et formation React"
}

### POST - CrÃ©er une facture sans description (optionnelle)
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "StartUp Innovation",
  "email": "hello@startup-innovation.com",
  "value": "850.50"
}

### POST - CrÃ©er une facture avec description longue
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Grande Corporation SARL",
  "email": "facturation@grande-corporation.fr",
  "value": "5000.00",
  "description": "Audit complet de sÃ©curitÃ©, mise en place d'une architecture microservices, formation Ã©quipe dÃ©veloppement sur Next.js 15 et intÃ©gration CI/CD avec Docker et Kubernetes"
}

### POST - Facture avec montant minimal
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Micro Entreprise",
  "email": "micro@example.com",
  "value": "0.01"
}

### POST - Facture avec gros montant
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Mega Project Corp",
  "email": "finance@megaproject.com",
  "value": "50000.00",
  "description": "Projet de transformation digitale complÃ¨te"
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# âŒ TESTS POST - VALIDATION DES ERREURS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### POST - Erreur : Customer manquant
POST {{apiUrl}}
Content-Type: application/json

{
  "email": "test@example.com",
  "value": "100.00"
}

### POST - Erreur : Email manquant
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test Customer",
  "value": "100.00"
}

### POST - Erreur : Value manquant
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test Customer",
  "email": "test@example.com"
}

### POST - Erreur : Tous les champs manquants
POST {{apiUrl}}
Content-Type: application/json

{
}

### POST - Erreur : Email invalide (format incorrect)
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test Customer",
  "email": "email-invalide",
  "value": "100.00"
}

### POST - Erreur : Value comme string vide
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test Customer", 
  "email": "test@example.com",
  "value": ""
}

### POST - Erreur : Value nÃ©gative
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test Customer",
  "email": "test@example.com", 
  "value": "-100.00"
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ” TESTS AVANCÃ‰S - CAS LIMITES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### POST - Customer avec caractÃ¨res spÃ©ciaux
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "SociÃ©tÃ© & Cie - L'Innovation (2024)",
  "email": "contact@societe-innovation.com",
  "value": "1200.00",
  "description": "Projet avec caractÃ¨res spÃ©ciaux : Ã , Ã©, Ã¨, Ã§, Ã¹, â‚¬, @, #"
}

### POST - Email avec domaine international
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "International Corp",
  "email": "contact@sociÃ©tÃ©-franÃ§ais.fr",
  "value": "2000.00"
}

### POST - Description avec emoji et caractÃ¨res Unicode
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Modern Agency",
  "email": "hello@modern-agency.com",
  "value": "999.99",
  "description": "ğŸš€ Projet innovant avec Ã©mojis et caractÃ¨res spÃ©ciaux : Ã±, Ã¼, ÃŸ, ä¸­æ–‡, Ñ€ÑƒÑÑĞºĞ¸Ğ¹"
}

### POST - Customer nom trÃ¨s long (test limite 120 chars)
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Nom d'entreprise extrÃªmement long pour tester la limite de 120 caractÃ¨res dÃ©finie dans le schÃ©ma Drizzle ORM",
  "email": "very-long-name@example.com",
  "value": "500.00"
}

### POST - Email long (test limite 160 chars)  
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test Long Email",
  "email": "utilisateur-avec-nom-tres-long-pour-tester-les-limites@domaine-avec-nom-extremement-long-pour-validation.com",
  "value": "300.00"
}

### POST - Description longue (test limite 255 chars)
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test Description",
  "email": "test@example.com", 
  "value": "400.00",
  "description": "Description trÃ¨s longue pour tester la limite de 255 caractÃ¨res dÃ©finie dans le schÃ©ma. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad."
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”§ TESTS TECHNIQUES - HEADERS ET FORMATS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### POST - Test avec Content-Type incorrect
POST {{apiUrl}}
Content-Type: text/plain

{
  "customer": "Test Wrong Content-Type",
  "email": "test@example.com",
  "value": "100.00"
}

### POST - Test sans Content-Type
POST {{apiUrl}}

{
  "customer": "Test No Content-Type",
  "email": "test@example.com", 
  "value": "100.00"
}

### POST - Test avec JSON malformÃ©
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test Malformed JSON"
  "email": "test@example.com",
  "value": "100.00"
}

### POST - Test avec propriÃ©tÃ©s supplÃ©mentaires (non validÃ©es)
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test Extra Props",
  "email": "test@example.com",
  "value": "100.00",
  "description": "Test propriÃ©tÃ©s supplÃ©mentaires",
  "extraField": "Cette propriÃ©tÃ© ne devrait pas Ãªtre traitÃ©e",
  "anotherField": 12345,
  "booleanField": true
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Š TESTS EN SÃ‰RIE - CRÃ‰ATION MULTIPLE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### POST - Facture 1/5 - SÃ©rie de tests
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Client SÃ©rie 1",
  "email": "client1@serie.com",
  "value": "100.00",
  "description": "PremiÃ¨re facture de la sÃ©rie"
}

### POST - Facture 2/5 - SÃ©rie de tests  
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Client SÃ©rie 2", 
  "email": "client2@serie.com",
  "value": "200.00",
  "description": "DeuxiÃ¨me facture de la sÃ©rie"
}

### POST - Facture 3/5 - SÃ©rie de tests
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Client SÃ©rie 3",
  "email": "client3@serie.com",
  "value": "300.00",
  "description": "TroisiÃ¨me facture de la sÃ©rie"
}

### POST - Facture 4/5 - SÃ©rie de tests
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Client SÃ©rie 4",
  "email": "client4@serie.com", 
  "value": "400.00",
  "description": "QuatriÃ¨me facture de la sÃ©rie"
}

### POST - Facture 5/5 - SÃ©rie de tests
POST {{apiUrl}}
Content-Type: application/json

{
  "customer": "Client SÃ©rie 5",
  "email": "client5@serie.com",
  "value": "500.00", 
  "description": "CinquiÃ¨me facture de la sÃ©rie"
}

### GET - VÃ©rification aprÃ¨s crÃ©ation en sÃ©rie
GET {{apiUrl}}
Accept: application/json

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ¯ TESTS DE PERFORMANCE - REQUÃŠTES SIMULTANÃ‰ES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### GET - Test performance 1
GET {{apiUrl}}

### GET - Test performance 2  
GET {{apiUrl}}

### GET - Test performance 3
GET {{apiUrl}}

### GET - Test performance 4
GET {{apiUrl}}

### GET - Test performance 5
GET {{apiUrl}}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”„ TESTS ENDPOINTS INEXISTANTS (404)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

### GET - Test route inexistante
GET {{baseUrl}}/api/invoices/123

### POST - Test route inexistante
POST {{baseUrl}}/api/invoices/create
Content-Type: application/json

{
  "customer": "Test 404",
  "email": "test@example.com",
  "value": "100.00"
}

### PUT - MÃ©thode non supportÃ©e
PUT {{apiUrl}}
Content-Type: application/json

{
  "customer": "Test PUT", 
  "email": "test@example.com",
  "value": "100.00"
}

### DELETE - MÃ©thode non supportÃ©e  
DELETE {{apiUrl}}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“ NOTES ET DOCUMENTATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

###
# ğŸ” COMMENT UTILISER CE FICHIER :
# 
# 1. Installer l'extension VSCode "REST Client" 
# 2. DÃ©marrer votre serveur Next.js : npm run dev
# 3. Cliquer sur "Send Request" au-dessus de chaque requÃªte
# 4. Observer les rÃ©ponses dans le panel de droite
# 
# ğŸ¯ TESTS RECOMMANDÃ‰S DANS L'ORDRE :
# 
# 1. GET initial (base vide)
# 2. POST factures valides (plusieurs)  
# 3. GET pour vÃ©rifier la crÃ©ation
# 4. POST avec erreurs de validation
# 5. Tests cas limites et caractÃ¨res spÃ©ciaux
# 6. Tests techniques (headers, JSON malformÃ©)
# 
# ğŸ“Š CODES DE STATUT ATTENDUS :
# 
# - 200 : GET successful
# - 201 : POST successful (crÃ©ation) 
# - 400 : Erreurs de validation
# - 404 : Routes inexistantes
# - 405 : MÃ©thodes non supportÃ©es
# - 500 : Erreurs serveur
# 
# ğŸ”§ DEBUGGING :
# 
# - VÃ©rifiez la console serveur Next.js pour les logs dÃ©taillÃ©s
# - Utilisez Drizzle Studio : npm run db:studio
# - Inspectez les rÃ©ponses JSON dans VSCode REST Client
#
# ğŸ‰ HAPPY TESTING ! 